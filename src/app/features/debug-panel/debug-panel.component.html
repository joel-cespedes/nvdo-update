<div class="debug-panel">
    <div class="debug-panel__header">
        <h3 class="debug-panel__title">Movesense Debug Panel</h3>
        <div class="debug-panel__controls">
            <button class="debug-panel__button" (click)="clearLog()">Clear Log</button>
            @if (isConnected()) {
            <button class="debug-panel__button" (click)="trySpecificFormat()">
                Try Specific Format
            </button>
            }
        </div>
    </div>

    <div class="debug-panel__status">
        <h4 class="debug-panel__subtitle">Sensor Status</h4>
        <div class="debug-panel__sensor-grid">
            <div class="debug-panel__sensor">
                <span class="debug-panel__sensor-name">Temperature:</span>
                <span class="debug-panel__sensor-status" [class.active]="temperatureStatus() === 'active'"
                    [class.error]="temperatureStatus() === 'error'">
                    {{ temperatureStatus() }}
                </span>
            </div>
            <div class="debug-panel__sensor">
                <span class="debug-panel__sensor-name">Accelerometer:</span>
                <span class="debug-panel__sensor-status" [class.active]="accelerometerStatus() === 'active'"
                    [class.error]="accelerometerStatus() === 'error'">
                    {{ accelerometerStatus() }}
                </span>
            </div>
            <div class="debug-panel__sensor">
                <span class="debug-panel__sensor-name">Heart Rate:</span>
                <span class="debug-panel__sensor-status" [class.active]="heartRateStatus() === 'active'"
                    [class.error]="heartRateStatus() === 'error'">
                    {{ heartRateStatus() }}
                </span>
            </div>
            <div class="debug-panel__sensor">
                <span class="debug-panel__sensor-name">Gyroscope:</span>
                <span class="debug-panel__sensor-status" [class.active]="gyroscopeStatus() === 'active'"
                    [class.error]="gyroscopeStatus() === 'error'">
                    {{ gyroscopeStatus() }}
                </span>
            </div>
            <div class="debug-panel__sensor">
                <span class="debug-panel__sensor-name">Magnetometer:</span>
                <span class="debug-panel__sensor-status" [class.active]="magnetometerStatus() === 'active'"
                    [class.error]="magnetometerStatus() === 'error'">
                    {{ magnetometerStatus() }}
                </span>
            </div>
            <div class="debug-panel__sensor">
                <span class="debug-panel__sensor-name">ECG:</span>
                <span class="debug-panel__sensor-status" [class.active]="ecgStatus() === 'active'"
                    [class.error]="ecgStatus() === 'error'">
                    {{ ecgStatus() }}
                </span>
            </div>
        </div>
    </div>

    <div class="debug-panel__log">
        <h4 class="debug-panel__subtitle">Debug Log</h4>
        <div class="debug-panel__log-container">
            @for (entry of debugLog(); track $index) {
            <div class="debug-panel__log-entry">{{ entry }}</div>
            }
            @if (debugLog().length === 0) {
            <div class="debug-panel__log-empty">No log entries yet</div>
            }
        </div>
    </div>
</div>